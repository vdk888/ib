{"openapi":"3.1.0","info":{"title":"Uncle Stock Portfolio API","description":"API for managing portfolio optimization, screening, and execution","version":"1.0.0"},"paths":{"/api/v1/screeners/available":{"get":{"tags":["screeners"],"summary":"Get Available Screeners","description":"Retrieve list of all available screener configurations","operationId":"get_available_screeners_api_v1_screeners_available_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableScreenersResponse"}}}}}}},"/api/v1/screeners/data":{"get":{"tags":["screeners"],"summary":"Get All Screener Data","description":"Fetch current stocks from all configured screeners (equivalent to get_all_screeners())","operationId":"get_all_screener_data_api_v1_screeners_data_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllScreenersResponse"}}}}}}},"/api/v1/screeners/data/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Specific Screener Data","description":"Fetch current stocks from a specific screener (equivalent to get_current_stocks())","operationId":"get_screener_data_api_v1_screeners_data__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"},{"name":"max_results","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results to return","default":200,"title":"Max Results"},"description":"Maximum number of results to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/history":{"get":{"tags":["screeners"],"summary":"Get All Screener Histories","description":"Fetch backtest history from all configured screeners (equivalent to get_all_screener_histories())","operationId":"get_all_screener_histories_api_v1_screeners_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllScreenerHistoriesResponse"}}}}}}},"/api/v1/screeners/history/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Specific Screener History","description":"Fetch backtest history from a specific screener (equivalent to get_screener_history())","operationId":"get_screener_history_api_v1_screeners_history__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/legacy/data/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Screener Data (Legacy Format)","description":"Legacy endpoint returning exact format as original get_current_stocks() function","operationId":"get_screener_data_legacy_api_v1_screeners_legacy_data__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"},{"name":"max_results","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results to return","default":200,"title":"Max Results"},"description":"Maximum number of results to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegacyScreenerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/legacy/history/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Screener History (Legacy Format)","description":"Legacy endpoint returning exact format as original get_screener_history() function","operationId":"get_screener_history_legacy_api_v1_screeners_legacy_history__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegacyScreenerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/historical/screeners/backtest":{"get":{"tags":["historical-data"],"summary":"Get All Backtest Data","description":"Parse and return backtest data for all configured screeners","operationId":"get_all_backtest_data_api_v1_historical_screeners_backtest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BacktestDataResponse"}}}}}}},"/api/v1/historical/screeners/backtest/{screener_id}":{"get":{"tags":["historical-data"],"summary":"Get Screener Backtest Data","description":"Parse and return backtest data for a specific screener","operationId":"get_screener_backtest_data_api_v1_historical_screeners_backtest__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener ID from configuration","title":"Screener Id"},"description":"Screener ID from configuration"},{"name":"debug","in":"query","required":false,"schema":{"type":"boolean","description":"Enable debug output","default":false,"title":"Debug"},"description":"Enable debug output"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoricalDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/historical/performance/summary":{"get":{"tags":["historical-data"],"summary":"Get Performance Summary","description":"Get formatted performance summary for all screeners (JSON equivalent of CLI display)","operationId":"get_performance_summary_api_v1_historical_performance_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceSummaryResponse"}}}}}}},"/api/v1/historical/universe/update":{"post":{"tags":["historical-data"],"summary":"Update Universe with History","description":"Update universe.json with historical performance data in metadata section","operationId":"update_universe_with_history_api_v1_historical_universe_update_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUniverseResponse"}}}}}}},"/api/v1/universe/parse":{"post":{"tags":["universe"],"summary":"Parse Universe","description":"Parse all screener CSV files and create universe.json\n\nThis endpoint wraps the legacy create_universe() + save_universe() functions\nto maintain 100% behavioral compatibility with CLI step2_parse_data()","operationId":"parse_universe_api_v1_universe_parse_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParseUniverseRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParseUniverseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe":{"get":{"tags":["universe"],"summary":"Get Universe","description":"Load and return universe data from JSON file\n\nReturns the complete universe structure including metadata,\nscreens, and all unique stocks data","operationId":"get_universe_api_v1_universe_get","parameters":[{"name":"universe_path","in":"query","required":false,"schema":{"type":"string","description":"Path to the universe.json file","default":"data/universe.json","title":"Universe Path"},"description":"Path to the universe.json file"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniverseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe/stock/{ticker}/field":{"get":{"tags":["universe"],"summary":"Get Stock Field","description":"Get specific field value for a stock from screener data\n\nSearches across CSV files to find the requested field for the given ticker.\nThis wraps the legacy get_stock_field() function for compatibility.","operationId":"get_stock_field_api_v1_universe_stock__ticker__field_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","description":"Stock ticker symbol (e.g., 'AAPL')","title":"Ticker"},"description":"Stock ticker symbol (e.g., 'AAPL')"},{"name":"header_name","in":"query","required":true,"schema":{"type":"string","title":"Header Name"}},{"name":"subtitle_pattern","in":"query","required":true,"schema":{"type":"string","title":"Subtitle Pattern"}},{"name":"screen_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screen Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockFieldResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe/fields/available":{"get":{"tags":["universe"],"summary":"Get Available Fields","description":"Discover all available header/subtitle combinations in CSV files\n\nThis wraps the legacy find_available_fields() function to help\nusers understand what field combinations they can query for.","operationId":"get_available_fields_api_v1_universe_fields_available_get","parameters":[{"name":"csv_path","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional path to specific CSV file. If not provided, uses first available screen.","title":"Csv Path"},"description":"Optional path to specific CSV file. If not provided, uses first available screen."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableFieldsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe/metadata":{"get":{"tags":["universe"],"summary":"Get Universe Metadata","description":"Get universe metadata without loading all stock data\n\nUseful for getting quick stats about the universe size and configuration","operationId":"get_universe_metadata_api_v1_universe_metadata_get","parameters":[{"name":"universe_path","in":"query","required":false,"schema":{"type":"string","description":"Path to the universe.json file","default":"data/universe.json","title":"Universe Path"},"description":"Path to the universe.json file"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe/stocks/{ticker}":{"get":{"tags":["universe"],"summary":"Get Stock By Ticker","description":"Get detailed information for a specific stock\n\nReturns all available data for the given ticker from the universe","operationId":"get_stock_by_ticker_api_v1_universe_stocks__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","description":"Stock ticker symbol","title":"Ticker"},"description":"Stock ticker symbol"},{"name":"universe_path","in":"query","required":false,"schema":{"type":"string","description":"Path to the universe.json file","default":"data/universe.json","title":"Universe Path"},"description":"Path to the universe.json file"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/universe/stocks/multi-screen":{"get":{"tags":["universe"],"summary":"Get Multi Screen Stocks","description":"Get stocks that appear in multiple screens\n\nReturns stocks that are present in more than one screener,\nwhich often indicates higher quality or consensus picks","operationId":"get_multi_screen_stocks_api_v1_universe_stocks_multi_screen_get","parameters":[{"name":"universe_path","in":"query","required":false,"schema":{"type":"string","description":"Path to the universe.json file","default":"data/universe.json","title":"Universe Path"},"description":"Path to the universe.json file"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Maximum number of stocks to return","default":50,"title":"Limit"},"description":"Maximum number of stocks to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/portfolio/optimize":{"post":{"tags":["Portfolio Optimization"],"summary":"Optimize Portfolio Allocation","description":"Run full portfolio optimization using Sharpe ratio maximization","operationId":"optimize_portfolio_api_v1_portfolio_optimize_post","responses":{"200":{"description":"Portfolio optimization successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortfolioOptimizationResponse"},"example":{"success":true,"optimization_results":{"optimal_weights":{"screener_1":0.35,"screener_2":0.65},"portfolio_stats":{"expected_annual_return":0.12,"annual_volatility":0.15,"sharpe_ratio":0.8}},"universe_updated":true,"message":"Portfolio optimization complete"}}}},"404":{"description":"Universe data not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Invalid universe data or optimization failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during optimization","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/optimization":{"get":{"tags":["Portfolio Optimization"],"summary":"Get Portfolio Optimization Results","description":"Retrieve current portfolio optimization results from universe.json","operationId":"get_optimization_results_api_v1_portfolio_optimization_get","responses":{"200":{"description":"Portfolio optimization results retrieved","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Optimization Results Api V1 Portfolio Optimization Get"},"example":{"optimal_allocations":{"screener_1":0.35,"screener_2":0.65},"portfolio_performance":{"expected_annual_return":0.12,"annual_volatility":0.15,"sharpe_ratio":0.8},"individual_screener_stats":{},"correlation_matrix":{},"optimization_details":{}}}}},"404":{"description":"No optimization results found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/returns":{"get":{"tags":["Portfolio Optimization"],"summary":"Get Quarterly Returns Data","description":"Extract and return quarterly returns data for all screeners","operationId":"get_quarterly_returns_api_v1_portfolio_returns_get","responses":{"200":{"description":"Quarterly returns data retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuarterlyReturnsResponse"},"example":{"returns_data":{"screener_1":[0.05,0.03,-0.02,0.08],"screener_2":[0.04,0.06,-0.01,0.07]},"quarters":["2023Q1","2023Q2","2023Q3","2023Q4"],"metadata":{"num_quarters":4,"num_screeners":2,"data_range":"2023Q1 to 2023Q4"}}}}},"404":{"description":"Universe data or historical performance not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Invalid historical data format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/health":{"get":{"tags":["Portfolio Optimization"],"summary":"Portfolio Service Health Check","description":"Check if portfolio optimization service is operational","operationId":"portfolio_health_check_api_v1_portfolio_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/portfolio/account/value":{"get":{"tags":["Portfolio Optimization"],"summary":"Get Account Total Value","description":"Fetch account total value from IBKR paper trading account","operationId":"get_account_value_api_v1_portfolio_account_value_get","responses":{"200":{"description":"Account value retrieved successfully","content":{"application/json":{"schema":{},"example":{"success":true,"account_value":10000.0,"currency":"EUR","rounded_account_value":10000.0,"rounding_note":"Rounded DOWN from €10,000.00 to €10,000.00 for conservative calculations"}}}},"503":{"description":"IBKR connection failed or account data unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during account value fetch","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/quantities/calculate":{"post":{"tags":["Portfolio Optimization"],"summary":"Calculate Stock Quantities","description":"Calculate stock quantities based on account value and target allocations","operationId":"calculate_quantities_api_v1_portfolio_quantities_calculate_post","responses":{"200":{"description":"Quantity calculation completed successfully","content":{"application/json":{"schema":{},"example":{"success":true,"account_value_used":9800.0,"original_account_value":9847.32,"currency":"EUR","stocks_processed":0,"universe_updated":true,"message":"Stock quantities calculated and universe.json updated"}}}},"404":{"description":"Universe data not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"503":{"description":"IBKR connection failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during quantity calculation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/quantities/calculate-with-value":{"post":{"tags":["Portfolio Optimization"],"summary":"Calculate Quantities with Custom Account Value","description":"Calculate stock quantities using provided account value instead of fetching from IBKR","operationId":"calculate_quantities_with_value_api_v1_portfolio_quantities_calculate_with_value_post","parameters":[{"name":"account_value","in":"query","required":true,"schema":{"type":"number","title":"Account Value"}},{"name":"currency","in":"query","required":false,"schema":{"type":"string","default":"EUR","title":"Currency"}}],"responses":{"200":{"description":"Quantity calculation with custom value completed successfully","content":{"application/json":{"schema":{},"example":{"success":true,"account_value_used":10000.0,"original_account_value":10000.0,"currency":"EUR","stocks_processed":0,"universe_updated":true,"message":"Stock quantities calculated with custom account value"}}}},"400":{"description":"Invalid account value provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Universe data not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during quantity calculation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/portfolio/quantities":{"get":{"tags":["Portfolio Optimization"],"summary":"Get Stock Quantities Data","description":"Retrieve calculated stock quantities from universe.json","operationId":"get_quantities_data_api_v1_portfolio_quantities_get","responses":{"200":{"description":"Stock quantities data retrieved successfully","content":{"application/json":{"schema":{},"example":{"account_total_value":{"value":10000.0,"currency":"EUR","timestamp":"2024-01-01 12:00:00"},"stocks_with_quantities":150,"total_stocks":200,"sample_stocks":[{"ticker":"AAPL","eur_price":150.25,"target_value_eur":500.0,"quantity":3,"final_target":0.05}]}}}},"404":{"description":"Universe data or account value not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error retrieving quantities data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/targets/calculate":{"post":{"tags":["Target Allocation"],"summary":"Calculate final stock allocations","description":"Calculate final stock allocations based on:\n    1. Screener allocations from portfolio optimizer\n    2. Stock performance ranking within each screener (180d price change)\n    3. Linear allocation within screener (best: MAX_ALLOCATION%, worst: MIN_ALLOCATION%)\n\n    This is the main endpoint equivalent to CLI `step6_calculate_targets()`.","operationId":"calculate_target_allocations_api_v1_portfolio_targets_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalculateTargetsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TargetAllocationResponse"}}}},"400":{"description":"Invalid request or missing data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Universe file not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/portfolio/targets/summary":{"get":{"tags":["Target Allocation"],"summary":"Get allocation summary","description":"Get formatted allocation summary data (JSON equivalent of display_allocation_summary).\n    Includes:\n    - All allocations sorted by final allocation\n    - Total allocation percentage\n    - Top 10 allocations\n    - Summary statistics","operationId":"get_allocation_summary_api_v1_portfolio_targets_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllocationSummaryResponse"}}}},"400":{"description":"Invalid request or no allocation data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Universe file not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/targets/screener-allocations":{"get":{"tags":["Target Allocation"],"summary":"Get screener allocations from portfolio optimizer","description":"Extract screener target allocations from portfolio optimization results.\n    These are used as the basis for individual stock allocations within each screener.","operationId":"get_screener_allocations_api_v1_portfolio_targets_screener_allocations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerAllocationsResponse"}}}},"400":{"description":"No portfolio optimization data available","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Universe file not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/portfolio/targets/rankings/{screener_id}":{"get":{"tags":["Target Allocation"],"summary":"Get stock rankings for a specific screener","description":"Get stock rankings within a specific screener based on 180-day performance.\n    Shows how stocks are ranked and allocated within each screener.","operationId":"get_screener_rankings_api_v1_portfolio_targets_rankings__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","title":"Screener Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerRankingsResponse"}}}},"404":{"description":"Screener not found or universe file missing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/portfolio/targets/":{"get":{"tags":["Target Allocation"],"summary":"Get current target allocations from universe","description":"Get the current target allocations that have been calculated and saved to universe.json.\n    This endpoint reads existing allocation data without recalculating.","operationId":"get_current_target_allocations_api_v1_portfolio_targets__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TargetAllocationResponse"}}}},"400":{"description":"No allocation data found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Universe file not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/orders/generate":{"post":{"tags":["Orders & Rebalancing"],"summary":"Generate Rebalancing Orders","description":"Generate buy/sell orders to rebalance portfolio to target allocations","operationId":"generate_orders_api_v1_orders_generate_post","parameters":[{"name":"universe_file","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Universe File"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebalancingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders":{"get":{"tags":["Orders & Rebalancing"],"summary":"Get Generated Orders","description":"Retrieve the most recently generated orders from data/orders.json","operationId":"get_orders_api_v1_orders_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrdersResponse"}}}}}}},"/api/v1/orders/positions/current":{"get":{"tags":["Orders & Rebalancing"],"summary":"Get Current IBKR Positions","description":"Fetch current positions from IBKR account","operationId":"get_current_positions_api_v1_orders_positions_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PositionsResponse"}}}}}}},"/api/v1/orders/positions/targets":{"get":{"tags":["Orders & Rebalancing"],"summary":"Get Target Quantities","description":"Calculate target quantities from universe data","operationId":"get_target_quantities_api_v1_orders_positions_targets_get","parameters":[{"name":"universe_file","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Universe File"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TargetQuantitiesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/run":{"post":{"tags":["Pipeline Orchestration"],"summary":"Run Complete Pipeline","description":"Execute complete 11-step fintech pipeline asynchronously","operationId":"run_full_pipeline_api_v1_pipeline_run_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/PipelineExecutionRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Pipeline execution started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullPipelineResponse"},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","success":true,"message":"Full pipeline execution started","estimated_duration":1800.0,"started_at":"2024-01-01T12:00:00Z"}}}},"500":{"description":"Internal server error starting pipeline","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/run/step/{step_number}":{"post":{"tags":["Pipeline Orchestration"],"summary":"Run Individual Step","description":"Execute single pipeline step","operationId":"run_individual_step_api_v1_pipeline_run_step__step_number__post","parameters":[{"name":"step_number","in":"path","required":true,"schema":{"type":"integer","title":"Step Number"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/StepExecutionRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Step execution completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndividualStepResponse"},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","step_number":1,"step_name":"Fetch Data","success":true,"execution_time":45.2,"created_files":["data/files_exports/screener1.csv"],"console_output":["STEP 1: Fetching data from Uncle Stock API","Step 1 complete"]}}}},"400":{"description":"Invalid step number","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during step execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/run/steps/{start_step}-{end_step}":{"post":{"tags":["Pipeline Orchestration"],"summary":"Run Step Range","description":"Execute range of pipeline steps with fail-fast behavior","operationId":"run_step_range_api_v1_pipeline_run_steps__start_step___end_step__post","parameters":[{"name":"start_step","in":"path","required":true,"schema":{"type":"integer","title":"Start Step"}},{"name":"end_step","in":"path","required":true,"schema":{"type":"integer","title":"End Step"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/StepRangeExecutionRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Step range execution completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StepRangeResponse"},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","start_step":1,"end_step":3,"success":true,"completed_steps":[1,2,3],"execution_time":120.5,"step_results":{"1":{"success":true,"execution_time":45.2},"2":{"success":true,"execution_time":30.1},"3":{"success":true,"execution_time":45.2}}}}}},"400":{"description":"Invalid step range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error during step range execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/runs/{execution_id}/status":{"get":{"tags":["Pipeline Orchestration"],"summary":"Get Execution Status","description":"Get real-time status of running or completed pipeline execution","operationId":"get_execution_status_api_v1_pipeline_runs__execution_id__status_get","parameters":[{"name":"execution_id","in":"path","required":true,"schema":{"type":"string","title":"Execution Id"}}],"responses":{"200":{"description":"Execution status retrieved","content":{"application/json":{"schema":{},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","status":"running","current_step":5,"completed_steps":[1,2,3,4],"start_time":"2024-01-01T12:00:00Z","execution_time":300.5,"progress_percentage":45.5,"estimated_remaining_time":600.0}}}},"404":{"description":"Execution not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/runs/{execution_id}/logs":{"get":{"tags":["Pipeline Orchestration"],"summary":"Get Execution Logs","description":"Get structured execution logs for pipeline run","operationId":"get_execution_logs_api_v1_pipeline_runs__execution_id__logs_get","parameters":[{"name":"execution_id","in":"path","required":true,"schema":{"type":"string","title":"Execution Id"}},{"name":"step_number","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Step Number"}}],"responses":{"200":{"description":"Execution logs retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineExecutionLogs"},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","logs":[{"timestamp":"2024-01-01T12:00:00Z","execution_id":"550e8400-e29b-41d4-a716-446655440000","step_number":1,"level":"INFO","message":"Starting Fetch Data","details":{}}],"step_logs":{"1":[{"timestamp":"2024-01-01T12:00:00Z","message":"Starting Fetch Data"}]},"total_log_entries":1}}}},"404":{"description":"Execution not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/runs/{execution_id}/results":{"get":{"tags":["Pipeline Orchestration"],"summary":"Get Execution Results","description":"Get detailed execution results and created files","operationId":"get_execution_results_api_v1_pipeline_runs__execution_id__results_get","parameters":[{"name":"execution_id","in":"path","required":true,"schema":{"type":"string","title":"Execution Id"}}],"responses":{"200":{"description":"Execution results retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineExecutionFiles"},"example":{"execution_id":"550e8400-e29b-41d4-a716-446655440000","created_files":{"1":["data/files_exports/screener1.csv","data/files_exports/screener2.csv"],"2":["data/universe.json"],"8":["data/universe_with_ibkr.json"],"9":["data/orders.json"]},"file_info":{"data/universe.json":{"file_path":"/absolute/path/data/universe.json","file_size":150000,"created_at":"2024-01-01T12:30:00Z","created_by_step":2,"file_type":"json"}},"total_files_created":5,"total_file_size":500000}}}},"404":{"description":"Execution not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/runs/{execution_id}/resume":{"post":{"tags":["Pipeline Orchestration"],"summary":"Resume Failed Execution","description":"Resume failed pipeline execution from specified step","operationId":"resume_failed_execution_api_v1_pipeline_runs__execution_id__resume_post","parameters":[{"name":"execution_id","in":"path","required":true,"schema":{"type":"string","title":"Execution Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ResumeExecutionRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Pipeline resume started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResumeExecutionResponse"},"example":{"execution_id":"new-execution-id-here","original_execution_id":"550e8400-e29b-41d4-a716-446655440000","resumed_from_step":8,"success":true,"message":"Pipeline resumed from step 8"}}}},"404":{"description":"Original execution not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Invalid resume parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/history":{"get":{"tags":["Pipeline Orchestration"],"summary":"Get Pipeline History","description":"Get history of pipeline executions with filtering","operationId":"get_pipeline_history_api_v1_pipeline_history_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}}],"responses":{"200":{"description":"Pipeline execution history retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineHistoryResponse"},"example":{"executions":[{"execution_id":"550e8400-e29b-41d4-a716-446655440000","execution_type":"full_pipeline","status":"completed","success":true,"start_time":"2024-01-01T12:00:00Z","end_time":"2024-01-01T12:30:00Z","execution_time":1800.0,"completed_steps":[1,2,3,4,5,6,7,8,9,10,11],"total_files_created":5,"is_resumed":false}],"total_executions":1,"filtered_count":1}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pipeline/steps/available":{"get":{"tags":["Pipeline Orchestration"],"summary":"Get Available Steps","description":"Get list of all available pipeline steps with descriptions and aliases","operationId":"get_available_steps_api_v1_pipeline_steps_available_get","responses":{"200":{"description":"Available steps retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableStepsResponse"},"example":{"steps":{"1":{"step_number":1,"step_name":"Fetch Data","description":"Fetch current stocks and backtest history from all screeners","aliases":["1","step1","fetch"],"dependencies":[],"creates_files":["data/files_exports/*.csv"],"modifies_files":[]}},"total_steps":11,"step_aliases":{"1":1,"step1":1,"fetch":1}}}}}}}},"/api/v1/pipeline/dependencies/validate":{"get":{"tags":["Pipeline Orchestration"],"summary":"Validate Pipeline Dependencies","description":"Validate that all pipeline dependencies and prerequisites are met","operationId":"validate_dependencies_api_v1_pipeline_dependencies_validate_get","responses":{"200":{"description":"Dependency validation completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineDependencyValidation"},"example":{"valid":true,"checks":{"main_py_functions":{"name":"main_py_functions","type":"code","required":true,"valid":true,"details":"All step functions from main.py are accessible"},"data_directory":{"name":"data_directory","type":"file","required":true,"valid":true,"details":"Data directory exists and is accessible"}},"missing_dependencies":[],"recommendations":[],"checked_at":"2024-01-01T12:00:00Z"}}}}}}},"/api/v1/pipeline/health":{"get":{"tags":["Pipeline Orchestration"],"summary":"Pipeline Service Health Check","description":"Check if pipeline orchestration service is operational","operationId":"pipeline_health_check_api_v1_pipeline_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ibkr/search/universe":{"get":{"tags":["IBKR Search"],"summary":"Search all universe stocks with quantities > 0","description":"Processes all stocks from universe.json that have quantities > 0\n    using comprehensive IBKR search strategies:\n\n    1. ISIN-based search (most reliable)\n    2. Ticker variations search (handles exchange suffixes)\n    3. Company name matching search (fallback)\n\n    Exact replication of comprehensive_enhanced_search.py behavior\n    but filtered to only process stocks with quantities > 0.\n\n    Expected to process ~123 stocks instead of all 439.","operationId":"search_universe_stocks_api_v1_ibkr_search_universe_get","parameters":[{"name":"max_concurrent","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"Max Concurrent"}},{"name":"use_cache","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Use Cache"}}],"responses":{"200":{"description":"Search completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniverseSearchResponse"}}}},"500":{"description":"IBKR connection or processing error"},"503":{"description":"IBKR Gateway not available"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ibkr/search/stock":{"post":{"tags":["IBKR Search"],"summary":"Search individual stock using comprehensive strategies","description":"Search for a single stock using the same comprehensive search strategies\n    as the legacy comprehensive_enhanced_search.py implementation:\n\n    1. ISIN search if available\n    2. Ticker variations (handles exchange suffixes like .PA, .L, .T)\n    3. Company name matching as fallback\n\n    Includes sophisticated validation using name similarity and word overlap.","operationId":"search_stock_api_v1_ibkr_search_stock_post","parameters":[{"name":"use_cache","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Use Cache"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockSearchRequest"}}}},"responses":{"200":{"description":"Search completed (may or may not find match)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockSearchResponse"}}}},"400":{"description":"Invalid stock data provided"},"503":{"description":"IBKR Gateway not available"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ibkr/search/cache/stats":{"get":{"tags":["IBKR Search"],"summary":"Get cache performance statistics","description":"Returns cache hit rates and performance metrics for IBKR search operations","operationId":"get_cache_stats_api_v1_ibkr_search_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Cache Stats Api V1 Ibkr Search Cache Stats Get"}}}}}}},"/api/v1/ibkr/search/cache":{"delete":{"tags":["IBKR Search"],"summary":"Clear search cache","description":"Clears all cached IBKR search results","operationId":"clear_cache_api_v1_ibkr_search_cache_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Response Clear Cache Api V1 Ibkr Search Cache Delete"}}}}}}},"/api/v1/ibkr/search/connections/status":{"get":{"tags":["IBKR Search"],"summary":"Get IBKR connection pool status","description":"Returns status and health information for IBKR Gateway connections","operationId":"get_connection_status_api_v1_ibkr_search_connections_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Connection Status Api V1 Ibkr Search Connections Status Get"}}}}}}},"/api/v1/currency/rates":{"get":{"tags":["currency"],"summary":"Fetch Exchange Rates","description":"Fetch current EUR-based exchange rates from external API\n\nThis endpoint wraps the legacy fetch_exchange_rates() function and provides\nidentical behavior including:\n- HTTP request to exchangerate-api.com with 10-second timeout\n- EUR as base currency with rate 1.0\n- Console output with + and X prefixes\n- Empty dict return on failures\n\nReturns:\n    ExchangeRatesResponse: Exchange rates data or error information","operationId":"fetch_exchange_rates_api_v1_currency_rates_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExchangeRatesResponse"}}}}}}},"/api/v1/universe/currencies":{"get":{"tags":["currency"],"summary":"Get Currencies From Universe","description":"Extract all unique currency codes from universe.json file\n\nThis endpoint wraps the legacy get_currencies_from_universe() function with\nidentical behavior including:\n- Reading from \"data/universe.json\" with UTF-8 encoding\n- Extracting from both \"screens\" and \"all_stocks\" sections\n- Console output with currency count and sorted list\n- Empty set return on file missing or JSON errors\n\nReturns:\n    UniverseCurrenciesResponse: Currencies found in universe or error information","operationId":"get_currencies_from_universe_api_v1_universe_currencies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniverseCurrenciesResponse"}}}}}}},"/api/v1/currency/update-universe":{"post":{"tags":["currency"],"summary":"Update Universe With Exchange Rates","description":"Update universe.json by adding EUR exchange rates to all stock objects\n\nThis endpoint wraps the legacy update_universe_with_exchange_rates() function\nwith identical behavior including:\n- Reading and writing \"data/universe.json\" with UTF-8 encoding\n- Updating both \"screens\" and \"all_stocks\" sections\n- Adding \"eur_exchange_rate\" field to each stock\n- Console output with progress counts and warnings\n- Pretty JSON formatting\n\nArgs:\n    exchange_rates: Dictionary with currency codes and EUR exchange rates\n\nReturns:\n    UniverseUpdateResponse: Update results or error information","operationId":"update_universe_with_exchange_rates_api_v1_currency_update_universe_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"number"},"type":"object","title":"Exchange Rates"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UniverseUpdateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/currency/update":{"post":{"tags":["currency"],"summary":"Run Currency Update Workflow","description":"Execute complete 3-step currency update workflow\n\nThis endpoint wraps the legacy main() function with identical behavior:\n1. Analyze currencies in universe.json\n2. Fetch current exchange rates from external API\n3. Update universe.json with EUR exchange rates\n\nMaintains all console output, error handling, and file operations exactly\nas in the original CLI implementation.\n\nReturns:\n    CurrencyUpdateWorkflowResponse: Complete workflow results","operationId":"run_currency_update_workflow_api_v1_currency_update_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrencyUpdateWorkflowResponse"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AllScreenerHistoriesResponse":{"properties":{"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerHistoryResponse"},"type":"object","title":"Screeners","description":"History results for each screener, keyed by screener ID"},"total_screeners":{"type":"integer","title":"Total Screeners","description":"Total number of screeners processed"},"successful_screeners":{"type":"integer","title":"Successful Screeners","description":"Number of screeners that returned history successfully"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when batch operation was completed"}},"type":"object","required":["screeners","total_screeners","successful_screeners"],"title":"AllScreenerHistoriesResponse","description":"Response model for fetching all screener histories"},"AllScreenersResponse":{"properties":{"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerDataResponse"},"type":"object","title":"Screeners","description":"Results for each screener, keyed by screener ID"},"total_screeners":{"type":"integer","title":"Total Screeners","description":"Total number of screeners processed"},"successful_screeners":{"type":"integer","title":"Successful Screeners","description":"Number of screeners that returned data successfully"},"total_symbols":{"type":"integer","title":"Total Symbols","description":"Total number of symbols across all screeners","default":0},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when batch operation was completed"}},"type":"object","required":["screeners","total_screeners","successful_screeners"],"title":"AllScreenersResponse","description":"Response model for fetching all screener data"},"AllocationSummaryData":{"properties":{"sorted_allocations":{"items":{"$ref":"#/components/schemas/StockAllocationData"},"type":"array","title":"Sorted Allocations","description":"All allocations sorted by final_allocation desc"},"total_allocation":{"type":"number","title":"Total Allocation","description":"Total allocation (decimal)"},"top_10_allocations":{"items":{"$ref":"#/components/schemas/Top10Allocation"},"type":"array","title":"Top 10 Allocations","description":"Top 10 allocations for quick reference"},"summary_stats":{"$ref":"#/components/schemas/AllocationSummaryStats","description":"Summary statistics"}},"type":"object","required":["sorted_allocations","total_allocation","top_10_allocations","summary_stats"],"title":"AllocationSummaryData","description":"Complete allocation summary data (JSON equivalent of display_allocation_summary)"},"AllocationSummaryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"summary":{"$ref":"#/components/schemas/AllocationSummaryData","description":"Complete allocation summary"}},"type":"object","required":["success","summary"],"title":"AllocationSummaryResponse","description":"Response model for allocation summary data"},"AllocationSummaryStats":{"properties":{"total_stocks":{"type":"integer","title":"Total Stocks","description":"Total number of stocks processed"},"total_allocation_pct":{"type":"number","title":"Total Allocation Pct","description":"Total allocation percentage"},"stocks_with_allocation":{"type":"integer","title":"Stocks With Allocation","description":"Number of stocks with non-zero allocation"}},"type":"object","required":["total_stocks","total_allocation_pct","stocks_with_allocation"],"title":"AllocationSummaryStats","description":"Summary statistics for allocation results"},"AvailableFieldsResponse":{"properties":{"fields":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Fields","description":"Available field combinations"},"total_count":{"type":"integer","title":"Total Count","description":"Total number of available fields"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File","description":"CSV file analyzed"}},"type":"object","required":["fields","total_count"],"title":"AvailableFieldsResponse","description":"Response model for available fields discovery"},"AvailableScreenersResponse":{"properties":{"screeners":{"additionalProperties":{"type":"string"},"type":"object","title":"Screeners","description":"Available screeners, mapping ID to display name"},"total_count":{"type":"integer","title":"Total Count","description":"Total number of available screeners"}},"type":"object","required":["screeners","total_count"],"title":"AvailableScreenersResponse","description":"Response model for available screeners"},"AvailableStepsResponse":{"properties":{"steps":{"additionalProperties":{"$ref":"#/components/schemas/PipelineStepInfo"},"type":"object","title":"Steps","description":"Step information by step number"},"total_steps":{"type":"integer","title":"Total Steps","description":"Total number of available steps"},"step_aliases":{"additionalProperties":{"type":"integer"},"type":"object","title":"Step Aliases","description":"CLI aliases mapped to step numbers"}},"type":"object","required":["steps","total_steps","step_aliases"],"title":"AvailableStepsResponse","description":"Response model for available pipeline steps"},"BacktestDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"Data","description":"Backtest data for all screeners"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Operation metadata (counts, etc.)"}},"type":"object","required":["success","data","metadata"],"title":"BacktestDataResponse","description":"Response model for all screeners backtest data"},"CalculateTargetsRequest":{"properties":{"force_recalculate":{"type":"boolean","title":"Force Recalculate","description":"Force recalculation even if data exists","default":false},"save_to_universe":{"type":"boolean","title":"Save To Universe","description":"Save results to universe.json","default":true}},"type":"object","title":"CalculateTargetsRequest","description":"Request model for calculating target allocations"},"CurrencyUpdateWorkflowResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether entire workflow completed successfully"},"step1_currencies":{"anyOf":[{"$ref":"#/components/schemas/UniverseCurrenciesResponse"},{"type":"null"}],"description":"Step 1: Currency extraction results"},"step2_exchange_rates":{"anyOf":[{"$ref":"#/components/schemas/ExchangeRatesResponse"},{"type":"null"}],"description":"Step 2: Exchange rate fetching results"},"step3_universe_update":{"anyOf":[{"$ref":"#/components/schemas/UniverseUpdateResponse"},{"type":"null"}],"description":"Step 3: Universe update results"},"workflow_message":{"type":"string","title":"Workflow Message","description":"Overall workflow status message"},"error_step":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Step","description":"Step where workflow failed (if applicable)"},"completed_at":{"type":"string","format":"date-time","title":"Completed At","description":"Timestamp when workflow completed"}},"type":"object","required":["success","workflow_message"],"title":"CurrencyUpdateWorkflowResponse","description":"Response model for complete currency update workflow\nMatches CLI behavior with structured API response"},"ErrorResponse":{"properties":{"error_code":{"type":"string","title":"Error Code"},"message":{"type":"string","title":"Message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"},"retry_after":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Retry After"},"timestamp":{"type":"string","title":"Timestamp","default":"2025-09-16T18:19:26.700383"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"}},"type":"object","required":["error_code","message"],"title":"ErrorResponse"},"ExchangeRatesData":{"properties":{"rates":{"additionalProperties":{"type":"number"},"type":"object","title":"Rates","description":"Currency codes mapped to EUR exchange rates"},"base_currency":{"type":"string","title":"Base Currency","description":"Base currency for rates","default":"EUR"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when rates were fetched"},"currency_count":{"type":"integer","minimum":0.0,"title":"Currency Count","description":"Number of currencies fetched"}},"type":"object","required":["rates","currency_count"],"title":"ExchangeRatesData","description":"Exchange rates data structure"},"ExchangeRatesResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether exchange rates were successfully fetched"},"exchange_rates":{"anyOf":[{"$ref":"#/components/schemas/ExchangeRatesData"},{"type":"null"}],"description":"Exchange rate data if successful"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message if fetching failed"},"api_endpoint":{"type":"string","title":"Api Endpoint","description":"External API endpoint used","default":"https://api.exchangerate-api.com/v4/latest/EUR"},"timeout_seconds":{"type":"integer","title":"Timeout Seconds","description":"API request timeout in seconds","default":10}},"type":"object","required":["success"],"title":"ExchangeRatesResponse","description":"Response model for exchange rate fetching\nMatches legacy behavior with API-friendly structure"},"FullPipelineResponse":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Execution identifier"},"success":{"type":"boolean","title":"Success","description":"Whether pipeline started successfully"},"message":{"type":"string","title":"Message","description":"Status message"},"estimated_duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Duration","description":"Estimated execution time"},"started_at":{"type":"string","format":"date-time","title":"Started At"}},"type":"object","required":["execution_id","success","message","estimated_duration"],"title":"FullPipelineResponse","description":"Response for full pipeline execution"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoricalDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"screener_id":{"type":"string","title":"Screener Id","description":"Screener identifier"},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Parsed backtest data structure"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Operation metadata (quarters parsed, etc.)"}},"type":"object","required":["success","screener_id","data","metadata"],"title":"HistoricalDataResponse","description":"Response model for individual screener backtest data"},"IBKRContractDetails":{"properties":{"symbol":{"type":"string","title":"Symbol","description":"IBKR symbol"},"longName":{"type":"string","title":"Longname","description":"Full company name from IBKR"},"currency":{"type":"string","title":"Currency","description":"Contract currency"},"exchange":{"type":"string","title":"Exchange","description":"Exchange where contract is traded"},"primaryExchange":{"type":"string","title":"Primaryexchange","description":"Primary exchange","default":""},"conId":{"type":"integer","title":"Conid","description":"IBKR contract ID","default":0},"search_method":{"type":"string","title":"Search Method","description":"Method used to find stock (isin, ticker, name)"},"match_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Match Score","description":"Name similarity score"}},"type":"object","required":["symbol","longName","currency","exchange","search_method","match_score"],"title":"IBKRContractDetails","description":"IBKR contract details response"},"IBKRDetails":{"properties":{"symbol":{"type":"string","title":"Symbol","description":"IBKR symbol for trading"},"exchange":{"type":"string","title":"Exchange","description":"Trading exchange"},"primaryExchange":{"type":"string","title":"Primaryexchange","description":"Primary exchange"},"conId":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Conid","description":"IBKR contract ID"}},"type":"object","required":["symbol","exchange","primaryExchange"],"title":"IBKRDetails","description":"IBKR contract details for order execution"},"IBKRSearchStats":{"properties":{"total":{"type":"integer","title":"Total","description":"Total stocks processed"},"found_isin":{"type":"integer","title":"Found Isin","description":"Stocks found via ISIN search"},"found_ticker":{"type":"integer","title":"Found Ticker","description":"Stocks found via ticker search"},"found_name":{"type":"integer","title":"Found Name","description":"Stocks found via name search"},"not_found":{"type":"integer","title":"Not Found","description":"Stocks not found in IBKR"},"execution_time_seconds":{"type":"number","title":"Execution Time Seconds","description":"Total execution time"},"filtered_stocks":{"type":"integer","title":"Filtered Stocks","description":"Stocks filtered by quantity > 0","default":0},"not_found_stocks":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Not Found Stocks","description":"List of stocks not found with details","default":[]}},"type":"object","required":["total","found_isin","found_ticker","found_name","not_found","execution_time_seconds"],"title":"IBKRSearchStats","description":"Statistics for IBKR search operations"},"IndividualStepResponse":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Execution identifier"},"step_number":{"type":"integer","title":"Step Number","description":"Step number executed"},"step_name":{"type":"string","title":"Step Name","description":"Step name"},"success":{"type":"boolean","title":"Success","description":"Whether step completed successfully"},"execution_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Execution Time","description":"Step execution time"},"created_files":{"items":{"type":"string"},"type":"array","title":"Created Files","description":"Files created by step"},"console_output":{"items":{"type":"string"},"type":"array","title":"Console Output","description":"Console output from step"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message if failed"}},"type":"object","required":["execution_id","step_number","step_name","success","execution_time","created_files","console_output","error_message"],"title":"IndividualStepResponse","description":"Response for individual step execution"},"LegacyScreenerResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"title":"Data"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File"}},"additionalProperties":true,"type":"object","required":["success","data"],"title":"LegacyScreenerResponse","description":"Legacy response format for 100% backward compatibility\nThis matches the exact dict structure from the original implementation"},"OptimizationDetails":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether optimization was successful"},"message":{"type":"string","title":"Message","description":"Optimization status message"},"method":{"type":"string","title":"Method","description":"Optimization method used"},"objective":{"type":"string","title":"Objective","description":"Optimization objective"},"constraints":{"type":"string","title":"Constraints","description":"Optimization constraints"}},"type":"object","required":["success","message","method","objective","constraints"],"title":"OptimizationDetails","description":"Portfolio optimization technical details"},"Order":{"properties":{"symbol":{"type":"string","title":"Symbol","description":"IBKR trading symbol"},"action":{"$ref":"#/components/schemas/OrderAction","description":"BUY or SELL action"},"quantity":{"type":"integer","exclusiveMinimum":0.0,"title":"Quantity","description":"Number of shares to trade"},"current_quantity":{"type":"integer","minimum":0.0,"title":"Current Quantity","description":"Current position quantity"},"target_quantity":{"type":"integer","minimum":0.0,"title":"Target Quantity","description":"Target position quantity"},"stock_info":{"$ref":"#/components/schemas/StockInfo","description":"Stock information"},"ibkr_details":{"$ref":"#/components/schemas/IBKRDetails","description":"IBKR contract details"}},"type":"object","required":["symbol","action","quantity","current_quantity","target_quantity","stock_info","ibkr_details"],"title":"Order","description":"Individual rebalancing order"},"OrderAction":{"type":"string","enum":["BUY","SELL"],"title":"OrderAction","description":"Order action enumeration"},"OrderMetadata":{"properties":{"generated_at":{"type":"string","title":"Generated At","description":"Timestamp when orders were generated"},"total_orders":{"type":"integer","minimum":0.0,"title":"Total Orders","description":"Total number of orders"},"buy_orders":{"type":"integer","minimum":0.0,"title":"Buy Orders","description":"Number of BUY orders"},"sell_orders":{"type":"integer","minimum":0.0,"title":"Sell Orders","description":"Number of SELL orders"},"total_buy_quantity":{"type":"integer","minimum":0.0,"title":"Total Buy Quantity","description":"Total shares to buy"},"total_sell_quantity":{"type":"integer","minimum":0.0,"title":"Total Sell Quantity","description":"Total shares to sell"}},"type":"object","required":["generated_at","total_orders","buy_orders","sell_orders","total_buy_quantity","total_sell_quantity"],"title":"OrderMetadata","description":"Metadata for order generation"},"OrdersResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the retrieval was successful"},"orders":{"items":{"$ref":"#/components/schemas/Order"},"type":"array","title":"Orders","description":"List of orders from file"},"metadata":{"$ref":"#/components/schemas/OrderMetadata","description":"Order metadata from file"}},"type":"object","required":["success","orders","metadata"],"title":"OrdersResponse","description":"Response model for retrieving saved orders\nSimplified response for getting orders from file"},"ParseUniverseRequest":{"properties":{"output_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Path","description":"Path where to save the universe.json file","default":"data/universe.json"}},"type":"object","title":"ParseUniverseRequest","description":"Request model for parsing universe"},"ParseUniverseResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether parsing was successful"},"message":{"type":"string","title":"Message","description":"Status message"},"universe_path":{"type":"string","title":"Universe Path","description":"Path to the created universe.json file"},"metadata":{"$ref":"#/components/schemas/UniverseMetadata","description":"Universe metadata and statistics"},"processing_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Processing Time","description":"Time taken for processing"}},"type":"object","required":["success","message","universe_path","metadata"],"title":"ParseUniverseResponse","description":"Response model for universe parsing operation"},"PerformanceSummaryData":{"properties":{"title":{"type":"string","title":"Title","description":"Summary title"},"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerSummary"},"type":"object","title":"Screeners","description":"Performance data by screener"}},"type":"object","required":["title","screeners"],"title":"PerformanceSummaryData","description":"Complete performance summary data"},"PerformanceSummaryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"summary":{"$ref":"#/components/schemas/PerformanceSummaryData","description":"Formatted performance summary"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Summary generation metadata"}},"type":"object","required":["success","summary","metadata"],"title":"PerformanceSummaryResponse","description":"Response model for performance summary"},"PipelineDependencyCheck":{"properties":{"name":{"type":"string","title":"Name","description":"Dependency name"},"type":{"type":"string","title":"Type","description":"Dependency type (file, service, configuration)"},"required":{"type":"boolean","title":"Required","description":"Whether this dependency is required"},"valid":{"type":"boolean","title":"Valid","description":"Whether dependency is satisfied"},"details":{"type":"string","title":"Details","description":"Dependency validation details"},"recommendation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation","description":"Recommendation if invalid"}},"type":"object","required":["name","type","required","valid","details","recommendation"],"title":"PipelineDependencyCheck","description":"Individual dependency validation result"},"PipelineDependencyValidation":{"properties":{"valid":{"type":"boolean","title":"Valid","description":"Whether all dependencies are satisfied"},"checks":{"additionalProperties":{"$ref":"#/components/schemas/PipelineDependencyCheck"},"type":"object","title":"Checks","description":"Individual dependency checks"},"missing_dependencies":{"items":{"type":"string"},"type":"array","title":"Missing Dependencies","description":"List of missing dependency names"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","description":"List of recommendations to fix issues"},"checked_at":{"type":"string","format":"date-time","title":"Checked At","description":"Timestamp when validation was performed"}},"type":"object","required":["valid","checks","missing_dependencies","recommendations"],"title":"PipelineDependencyValidation","description":"Complete pipeline dependency validation"},"PipelineExecutionFiles":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Execution identifier"},"created_files":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Created Files","description":"File paths created by each step"},"file_info":{"additionalProperties":{"$ref":"#/components/schemas/PipelineFileInfo"},"type":"object","title":"File Info","description":"Detailed file information"},"total_files_created":{"type":"integer","minimum":0.0,"title":"Total Files Created","description":"Total number of files created"},"total_file_size":{"type":"integer","minimum":0.0,"title":"Total File Size","description":"Total size of all files in bytes"}},"type":"object","required":["execution_id","created_files","file_info","total_files_created","total_file_size"],"title":"PipelineExecutionFiles","description":"File results from pipeline execution"},"PipelineExecutionLogs":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Execution identifier"},"logs":{"items":{"$ref":"#/components/schemas/PipelineLogEntry"},"type":"array","title":"Logs","description":"List of log entries in chronological order"},"step_logs":{"anyOf":[{"additionalProperties":{"items":{"$ref":"#/components/schemas/PipelineLogEntry"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Step Logs","description":"Logs grouped by step"},"total_log_entries":{"type":"integer","minimum":0.0,"title":"Total Log Entries","description":"Total number of log entries"}},"type":"object","required":["execution_id","logs","step_logs","total_log_entries"],"title":"PipelineExecutionLogs","description":"Structured execution logs"},"PipelineExecutionMetadata":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Unique execution identifier"},"execution_type":{"type":"string","title":"Execution Type","description":"Execution type (full_pipeline, individual_step, step_range)"},"started_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started By","description":"User/system that started execution"},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"Execution start timestamp"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time","description":"Execution completion timestamp"},"estimated_duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Duration","description":"Estimated execution time in seconds"},"target_steps":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Target Steps","description":"Target steps to execute"},"start_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Start Step","description":"Start step for range execution"},"end_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"End Step","description":"End step for range execution"},"single_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Single Step","description":"Single step for individual execution"},"is_resumed":{"type":"boolean","title":"Is Resumed","description":"Whether this is a resumed execution","default":false},"original_execution_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Execution Id","description":"Original execution ID if resumed"},"resumed_from_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resumed From Step","description":"Step number resumed from"}},"type":"object","required":["execution_id","execution_type","start_time"],"title":"PipelineExecutionMetadata","description":"Pipeline execution metadata and configuration"},"PipelineExecutionRequest":{"properties":{"execution_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Id","description":"Optional execution ID (generated if not provided)"},"started_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started By","description":"User identifier starting the execution"}},"type":"object","required":["execution_id","started_by"],"title":"PipelineExecutionRequest","description":"Request model for full pipeline execution"},"PipelineFileInfo":{"properties":{"file_path":{"type":"string","title":"File Path","description":"Absolute path to the file"},"file_size":{"type":"integer","minimum":0.0,"title":"File Size","description":"File size in bytes"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"File creation timestamp"},"modified_at":{"type":"string","format":"date-time","title":"Modified At","description":"File modification timestamp"},"created_by_step":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"Created By Step","description":"Step that created this file"},"file_type":{"type":"string","title":"File Type","description":"File type (json, csv, etc.)"}},"type":"object","required":["file_path","file_size","created_at","modified_at","created_by_step","file_type"],"title":"PipelineFileInfo","description":"Information about files created/modified by pipeline"},"PipelineHistoryEntry":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Unique execution identifier"},"execution_type":{"type":"string","title":"Execution Type","description":"Type of execution"},"status":{"$ref":"#/components/schemas/app__models__schemas__PipelineExecutionStatus__2","description":"Final execution status"},"success":{"type":"boolean","title":"Success","description":"Whether execution was successful"},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"Execution start timestamp"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time","description":"Execution end timestamp"},"execution_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Execution Time","description":"Total execution time in seconds"},"completed_steps":{"items":{"type":"integer"},"type":"array","title":"Completed Steps","description":"Successfully completed steps"},"failed_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Failed Step","description":"Failed step number"},"total_files_created":{"type":"integer","minimum":0.0,"title":"Total Files Created","description":"Number of files created"},"is_resumed":{"type":"boolean","title":"Is Resumed","description":"Whether this was a resumed execution"}},"type":"object","required":["execution_id","execution_type","status","success","start_time","end_time","execution_time","completed_steps","failed_step","total_files_created","is_resumed"],"title":"PipelineHistoryEntry","description":"Pipeline execution history entry"},"PipelineHistoryResponse":{"properties":{"executions":{"items":{"$ref":"#/components/schemas/PipelineHistoryEntry"},"type":"array","title":"Executions","description":"List of execution history entries"},"total_executions":{"type":"integer","minimum":0.0,"title":"Total Executions","description":"Total executions in history"},"filtered_count":{"type":"integer","minimum":0.0,"title":"Filtered Count","description":"Number of executions matching filter"},"status_filter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter","description":"Status filter applied"}},"type":"object","required":["executions","total_executions","filtered_count","status_filter"],"title":"PipelineHistoryResponse","description":"Pipeline execution history response"},"PipelineLogEntry":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Log entry timestamp"},"execution_id":{"type":"string","title":"Execution Id","description":"Pipeline execution identifier"},"step_number":{"anyOf":[{"type":"integer","maximum":11.0,"minimum":1.0},{"type":"null"}],"title":"Step Number","description":"Step number (None for pipeline-level logs)"},"level":{"type":"string","title":"Level","description":"Log level (INFO, WARNING, ERROR)"},"message":{"type":"string","title":"Message","description":"Log message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details","description":"Additional log details"}},"type":"object","required":["timestamp","execution_id","step_number","level","message"],"title":"PipelineLogEntry","description":"Structured pipeline log entry"},"PipelineStepInfo":{"properties":{"step_number":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"Step Number","description":"Step number (1-11)"},"step_name":{"type":"string","title":"Step Name","description":"Human-readable step name"},"description":{"type":"string","title":"Description","description":"Step description"},"aliases":{"items":{"type":"string"},"type":"array","title":"Aliases","description":"CLI aliases for this step"},"dependencies":{"items":{"type":"integer"},"type":"array","title":"Dependencies","description":"Step numbers this step depends on"},"creates_files":{"items":{"type":"string"},"type":"array","title":"Creates Files","description":"Files this step creates"},"modifies_files":{"items":{"type":"string"},"type":"array","title":"Modifies Files","description":"Files this step modifies"}},"type":"object","required":["step_number","step_name","description","aliases","dependencies","creates_files","modifies_files"],"title":"PipelineStepInfo","description":"Pipeline step information and metadata"},"PipelineStepResult":{"properties":{"step_number":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"Step Number","description":"Step number executed"},"step_name":{"type":"string","title":"Step Name","description":"Human-readable step name"},"status":{"$ref":"#/components/schemas/PipelineStepStatus","description":"Step execution status"},"success":{"type":"boolean","title":"Success","description":"Whether step completed successfully"},"execution_time":{"type":"number","minimum":0.0,"title":"Execution Time","description":"Step execution time in seconds"},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"Step start timestamp"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time","description":"Step completion timestamp"},"created_files":{"items":{"type":"string"},"type":"array","title":"Created Files","description":"Files created by this step"},"modified_files":{"items":{"type":"string"},"type":"array","title":"Modified Files","description":"Files modified by this step"},"console_output":{"items":{"type":"string"},"type":"array","title":"Console Output","description":"Console output lines from step"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message if step failed"},"error_traceback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Traceback","description":"Error traceback if step failed"}},"type":"object","required":["step_number","step_name","status","success","execution_time","start_time"],"title":"PipelineStepResult","description":"Individual step execution result"},"PipelineStepStatus":{"type":"string","enum":["pending","running","completed","failed","skipped"],"title":"PipelineStepStatus","description":"Individual step execution status"},"PortfolioOptimizationData":{"properties":{"optimal_allocations":{"additionalProperties":{"type":"number"},"type":"object","title":"Optimal Allocations","description":"Optimal portfolio weights by screener"},"portfolio_performance":{"$ref":"#/components/schemas/PortfolioStats","description":"Optimized portfolio performance"},"individual_screener_stats":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerStats"},"type":"object","title":"Individual Screener Stats","description":"Individual screener statistics"},"correlation_matrix":{"additionalProperties":{"additionalProperties":{"type":"number"},"type":"object"},"type":"object","title":"Correlation Matrix","description":"Screener correlation matrix"},"optimization_details":{"$ref":"#/components/schemas/OptimizationDetails","description":"Optimization technical details"}},"type":"object","required":["optimal_allocations","portfolio_performance","individual_screener_stats","correlation_matrix","optimization_details"],"title":"PortfolioOptimizationData","description":"Complete portfolio optimization results"},"PortfolioOptimizationResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the optimization was successful"},"optimization_results":{"$ref":"#/components/schemas/PortfolioOptimizationData","description":"Complete optimization results"},"universe_updated":{"type":"boolean","title":"Universe Updated","description":"Whether universe.json was updated"},"message":{"type":"string","title":"Message","description":"Operation status message"}},"type":"object","required":["success","optimization_results","universe_updated","message"],"title":"PortfolioOptimizationResponse","description":"Response model for portfolio optimization\nMaintains compatibility with CLI output"},"PortfolioStats":{"properties":{"expected_annual_return":{"type":"number","title":"Expected Annual Return","description":"Expected annual return (decimal, e.g., 0.12 = 12%)"},"annual_volatility":{"type":"number","title":"Annual Volatility","description":"Annual volatility (decimal)"},"sharpe_ratio":{"type":"number","title":"Sharpe Ratio","description":"Sharpe ratio"}},"type":"object","required":["expected_annual_return","annual_volatility","sharpe_ratio"],"title":"PortfolioStats","description":"Portfolio performance statistics"},"PositionsResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether position fetch was successful"},"positions":{"additionalProperties":{"type":"integer"},"type":"object","title":"Positions","description":"Current positions by symbol"},"contract_details":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"Contract Details","description":"IBKR contract details by symbol"},"message":{"type":"string","title":"Message","description":"Position fetch status message"}},"type":"object","required":["success","positions","contract_details","message"],"title":"PositionsResponse","description":"Response model for current IBKR positions"},"QuarterlyReturnsMetadata":{"properties":{"num_quarters":{"type":"integer","title":"Num Quarters","description":"Number of quarters in dataset"},"num_screeners":{"type":"integer","title":"Num Screeners","description":"Number of screeners with data"},"screeners":{"items":{"type":"string"},"type":"array","title":"Screeners","description":"List of screener names"},"data_range":{"type":"string","title":"Data Range","description":"Date range of quarterly data"}},"type":"object","required":["num_quarters","num_screeners","screeners","data_range"],"title":"QuarterlyReturnsMetadata","description":"Metadata for quarterly returns data"},"QuarterlyReturnsResponse":{"properties":{"returns_data":{"additionalProperties":{"items":{"type":"number"},"type":"array"},"type":"object","title":"Returns Data","description":"Quarterly returns by screener (decimal format)"},"quarters":{"items":{"type":"string"},"type":"array","title":"Quarters","description":"Quarter labels (e.g., '2023Q1')"},"metadata":{"$ref":"#/components/schemas/QuarterlyReturnsMetadata","description":"Dataset metadata"}},"type":"object","required":["returns_data","quarters","metadata"],"title":"QuarterlyReturnsResponse","description":"Response model for quarterly returns data\nUsed as input for portfolio optimization"},"RebalancingResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the rebalancing was successful"},"orders":{"items":{"$ref":"#/components/schemas/Order"},"type":"array","title":"Orders","description":"List of generated orders"},"metadata":{"$ref":"#/components/schemas/OrderMetadata","description":"Order generation metadata"},"target_quantities":{"additionalProperties":{"type":"integer"},"type":"object","title":"Target Quantities","description":"Target quantities by symbol"},"current_positions":{"additionalProperties":{"type":"integer"},"type":"object","title":"Current Positions","description":"Current positions by symbol"},"message":{"type":"string","title":"Message","description":"Rebalancing status message"}},"type":"object","required":["success","orders","metadata","target_quantities","current_positions","message"],"title":"RebalancingResponse","description":"Response model for rebalancing order generation\nComplete response including orders, metadata, and analysis data"},"ResumeExecutionRequest":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Original execution ID to resume"},"from_step":{"anyOf":[{"type":"integer","maximum":11.0,"minimum":1.0},{"type":"null"}],"title":"From Step","description":"Step to resume from (auto-detect if None)"},"started_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started By","description":"User identifier resuming the execution"}},"type":"object","required":["execution_id","from_step","started_by"],"title":"ResumeExecutionRequest","description":"Request model for resuming failed execution"},"ResumeExecutionResponse":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"New execution identifier"},"original_execution_id":{"type":"string","title":"Original Execution Id","description":"Original failed execution ID"},"resumed_from_step":{"type":"integer","title":"Resumed From Step","description":"Step number resumed from"},"success":{"type":"boolean","title":"Success","description":"Whether resume was successful"},"message":{"type":"string","title":"Message","description":"Resume status message"}},"type":"object","required":["execution_id","original_execution_id","resumed_from_step","success","message"],"title":"ResumeExecutionResponse","description":"Response for resume execution"},"ScreenInfo":{"properties":{"name":{"type":"string","title":"Name","description":"Screen display name"},"count":{"type":"integer","title":"Count","description":"Number of stocks in this screen"},"stocks":{"items":{"$ref":"#/components/schemas/StockData"},"type":"array","title":"Stocks","description":"List of stocks in this screen"}},"type":"object","required":["name","count","stocks"],"title":"ScreenInfo","description":"Screen information model"},"ScreenerAllocation":{"properties":{"screener_id":{"type":"string","title":"Screener Id","description":"Screener identifier"},"screener_name":{"type":"string","title":"Screener Name","description":"Screener display name"},"allocation":{"type":"number","title":"Allocation","description":"Target allocation (decimal, e.g., 0.35 = 35%)"}},"type":"object","required":["screener_id","screener_name","allocation"],"title":"ScreenerAllocation","description":"Screener allocation from portfolio optimizer"},"ScreenerAllocationsResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether extraction was successful"},"screener_allocations":{"additionalProperties":{"type":"number"},"type":"object","title":"Screener Allocations","description":"Screener allocations by ID"},"screeners_data":{"items":{"$ref":"#/components/schemas/ScreenerAllocation"},"type":"array","title":"Screeners Data","description":"Detailed screener allocation data"}},"type":"object","required":["success","screener_allocations","screeners_data"],"title":"ScreenerAllocationsResponse","description":"Response model for screener allocations"},"ScreenerDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"title":"Data","description":"Screener data (list of symbols for success, error message for failure)"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response","description":"Raw API response data"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File","description":"Path to saved CSV file"},"screener_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screener Name","description":"Human-readable screener name"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when data was fetched"},"symbol_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Symbol Count","description":"Number of symbols returned (for successful responses)"}},"type":"object","required":["success","data"],"title":"ScreenerDataResponse","description":"Response model for screener data fetching\nMatches legacy return structure for 100% compatibility"},"ScreenerHistoryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"title":"Data","description":"Historical data (dict for success, error message for failure)"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response","description":"Raw API response data"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File","description":"Path to saved CSV file"},"screener_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screener Name","description":"Human-readable screener name"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when data was fetched"}},"type":"object","required":["success","data"],"title":"ScreenerHistoryResponse","description":"Response model for screener historical data\nMatches legacy return structure for 100% compatibility"},"ScreenerRankingsResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether ranking was successful"},"screener_id":{"type":"string","title":"Screener Id","description":"Screener identifier"},"screener_name":{"type":"string","title":"Screener Name","description":"Screener display name"},"rankings":{"items":{"$ref":"#/components/schemas/StockRanking"},"type":"array","title":"Rankings","description":"Stock rankings sorted by performance"},"total_stocks":{"type":"integer","title":"Total Stocks","description":"Total stocks in screener"},"stocks_with_allocation":{"type":"integer","title":"Stocks With Allocation","description":"Stocks receiving non-zero allocation"}},"type":"object","required":["success","screener_id","screener_name","rankings","total_stocks","stocks_with_allocation"],"title":"ScreenerRankingsResponse","description":"Response model for stock rankings within a screener"},"ScreenerStats":{"properties":{"annual_return":{"type":"number","title":"Annual Return","description":"Annual return (decimal)"},"annual_volatility":{"type":"number","title":"Annual Volatility","description":"Annual volatility (decimal)"},"sharpe_ratio":{"type":"number","title":"Sharpe Ratio","description":"Sharpe ratio"}},"type":"object","required":["annual_return","annual_volatility","sharpe_ratio"],"title":"ScreenerStats","description":"Individual screener performance statistics"},"ScreenerSummary":{"properties":{"screen_name":{"type":"string","title":"Screen Name","description":"Screener display name"},"status":{"type":"string","title":"Status","description":"Parsing status (success/error)"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if parsing failed"},"backtest_period":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Backtest Period","description":"Backtest date range"},"rebalance_timing":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rebalance Timing","description":"Rebalancing frequency"},"number_of_stocks":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Number Of Stocks","description":"Number of stocks"},"key_statistics":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Key Statistics","description":"Key performance metrics"},"quarterly_summary":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Quarterly Summary","description":"Quarterly summary"}},"type":"object","required":["screen_name","status"],"title":"ScreenerSummary","description":"Performance summary for a single screener"},"StepExecutionRequest":{"properties":{"step_number":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"Step Number","description":"Step number to execute (1-11)"},"execution_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Id","description":"Optional execution ID"},"started_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started By","description":"User identifier starting the execution"}},"type":"object","required":["step_number","execution_id","started_by"],"title":"StepExecutionRequest","description":"Request model for individual step execution"},"StepRangeExecutionRequest":{"properties":{"start_step":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"Start Step","description":"First step to execute (1-11)"},"end_step":{"type":"integer","maximum":11.0,"minimum":1.0,"title":"End Step","description":"Last step to execute (1-11)"},"execution_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Id","description":"Optional execution ID"},"started_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started By","description":"User identifier starting the execution"}},"type":"object","required":["start_step","end_step","execution_id","started_by"],"title":"StepRangeExecutionRequest","description":"Request model for step range execution"},"StepRangeResponse":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Execution identifier"},"start_step":{"type":"integer","title":"Start Step","description":"First step executed"},"end_step":{"type":"integer","title":"End Step","description":"Last step attempted"},"success":{"type":"boolean","title":"Success","description":"Whether range execution completed successfully"},"completed_steps":{"items":{"type":"integer"},"type":"array","title":"Completed Steps","description":"Successfully completed steps"},"failed_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Failed Step","description":"Step that failed"},"execution_time":{"type":"number","title":"Execution Time","description":"Total execution time"},"step_results":{"additionalProperties":{"$ref":"#/components/schemas/PipelineStepResult"},"type":"object","title":"Step Results","description":"Results for each step"}},"type":"object","required":["execution_id","start_step","end_step","success","completed_steps","failed_step","execution_time","step_results"],"title":"StepRangeResponse","description":"Response for step range execution"},"StockAllocationData":{"properties":{"ticker":{"type":"string","title":"Ticker","description":"Stock ticker symbol"},"screener":{"type":"string","title":"Screener","description":"Screener name where stock appears"},"rank":{"type":"integer","title":"Rank","description":"Rank within screener (1 = best performing)"},"performance_180d":{"type":"number","title":"Performance 180D","description":"180-day performance percentage (e.g., 12.45 for 12.45%)"},"pocket_allocation":{"type":"number","title":"Pocket Allocation","description":"Allocation within screener (decimal, 0.0 to MAX_ALLOCATION)"},"screener_target":{"type":"number","title":"Screener Target","description":"Screener target allocation from optimizer (decimal)"},"final_allocation":{"type":"number","title":"Final Allocation","description":"Final allocation = screener_target * pocket_allocation"}},"type":"object","required":["ticker","screener","rank","performance_180d","pocket_allocation","screener_target","final_allocation"],"title":"StockAllocationData","description":"Individual stock allocation data\nMatches the structure from calculate_final_allocations()"},"StockData":{"properties":{"ticker":{"type":"string","title":"Ticker","description":"Stock ticker symbol"},"isin":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Isin","description":"ISIN identifier"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Company name"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency","description":"Stock price currency"},"sector":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sector","description":"Sector classification"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country","description":"Country of incorporation"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price","description":"Current stock price"},"screens":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Screens","description":"Screens where this stock appears"}},"additionalProperties":true,"type":"object","required":["ticker"],"title":"StockData","description":"Individual stock data model\nMatches the structure from parser.py"},"StockFieldResponse":{"properties":{"ticker":{"type":"string","title":"Ticker","description":"Stock ticker"},"field":{"type":"string","title":"Field","description":"Field description"},"value":{"type":"string","title":"Value","description":"Field value"},"screen":{"type":"string","title":"Screen","description":"Screen where the data was found"}},"type":"object","required":["ticker","field","value","screen"],"title":"StockFieldResponse","description":"Response model for stock field data"},"StockInfo":{"properties":{"ticker":{"type":"string","title":"Ticker","description":"Original stock ticker"},"name":{"type":"string","title":"Name","description":"Company name"},"currency":{"type":"string","title":"Currency","description":"Stock currency"},"screens":{"items":{"type":"string"},"type":"array","title":"Screens","description":"List of screens this stock appears in"}},"type":"object","required":["ticker","name","currency","screens"],"title":"StockInfo","description":"Stock information for order context"},"StockRanking":{"properties":{"ticker":{"type":"string","title":"Ticker","description":"Stock ticker symbol"},"rank":{"type":"integer","title":"Rank","description":"Rank within screener (1 = best)"},"performance_180d":{"type":"number","title":"Performance 180D","description":"180-day performance percentage"},"pocket_allocation":{"type":"number","title":"Pocket Allocation","description":"Allocation within screener (decimal)"}},"type":"object","required":["ticker","rank","performance_180d","pocket_allocation"],"title":"StockRanking","description":"Individual stock ranking within screener"},"StockSearchRequest":{"properties":{"ticker":{"type":"string","minLength":1,"title":"Ticker","description":"Stock ticker symbol"},"isin":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Isin","description":"International Securities Identification Number"},"name":{"type":"string","minLength":1,"title":"Name","description":"Company name"},"currency":{"type":"string","maxLength":3,"minLength":3,"title":"Currency","description":"Stock currency (EUR, USD, JPY, etc.)"},"sector":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sector","description":"Business sector"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country","description":"Country of incorporation"}},"type":"object","required":["ticker","isin","name","currency","sector","country"],"title":"StockSearchRequest","description":"Request model for individual stock search"},"StockSearchResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the search operation was successful"},"found":{"type":"boolean","title":"Found","description":"Whether the stock was found in IBKR"},"message":{"type":"string","title":"Message","description":"Search result message"},"stock":{"$ref":"#/components/schemas/StockSearchRequest","description":"Original stock search request"},"ibkr_details":{"anyOf":[{"$ref":"#/components/schemas/IBKRContractDetails"},{"type":"null"}],"description":"IBKR contract details if found"}},"type":"object","required":["success","found","message","stock"],"title":"StockSearchResponse","description":"Response model for individual stock search"},"TargetAllocationResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the calculation was successful"},"message":{"type":"string","title":"Message","description":"Operation status message"},"allocation_data":{"additionalProperties":{"$ref":"#/components/schemas/StockAllocationData"},"type":"object","title":"Allocation Data","description":"Allocation data by ticker"},"universe_updated":{"type":"boolean","title":"Universe Updated","description":"Whether universe.json was updated with allocation data"}},"type":"object","required":["success","message","allocation_data","universe_updated"],"title":"TargetAllocationResponse","description":"Response model for target allocation calculation"},"TargetQuantitiesResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether calculation was successful"},"target_quantities":{"additionalProperties":{"type":"integer"},"type":"object","title":"Target Quantities","description":"Target quantities by symbol"},"total_symbols":{"type":"integer","minimum":0.0,"title":"Total Symbols","description":"Total number of symbols with targets"},"total_shares":{"type":"integer","minimum":0.0,"title":"Total Shares","description":"Total target shares across all symbols"}},"type":"object","required":["success","target_quantities","total_symbols","total_shares"],"title":"TargetQuantitiesResponse","description":"Response model for target quantities calculation"},"Top10Allocation":{"properties":{"rank_overall":{"type":"integer","title":"Rank Overall","description":"Overall rank (1-10)"},"ticker":{"type":"string","title":"Ticker","description":"Stock ticker symbol"},"final_allocation":{"type":"number","title":"Final Allocation","description":"Final allocation percentage (decimal)"},"screener":{"type":"string","title":"Screener","description":"Screener name"},"screener_rank":{"type":"integer","title":"Screener Rank","description":"Rank within screener"},"performance_180d":{"type":"number","title":"Performance 180D","description":"180-day performance percentage"}},"type":"object","required":["rank_overall","ticker","final_allocation","screener","screener_rank","performance_180d"],"title":"Top10Allocation","description":"Top 10 allocation entry for quick reference"},"UniverseCurrenciesResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether currencies were successfully extracted"},"currencies":{"items":{"type":"string"},"type":"array","title":"Currencies","description":"List of unique currency codes found"},"currency_count":{"type":"integer","minimum":0.0,"title":"Currency Count","description":"Number of unique currencies"},"source_file":{"type":"string","title":"Source File","description":"Source file path","default":"data/universe.json"},"extracted_at":{"type":"string","format":"date-time","title":"Extracted At","description":"Timestamp when currencies were extracted"}},"type":"object","required":["success","currency_count"],"title":"UniverseCurrenciesResponse","description":"Response model for currencies found in universe.json"},"UniverseMetadata":{"properties":{"screens":{"items":{"type":"string"},"type":"array","title":"Screens","description":"List of screen names"},"total_stocks":{"type":"integer","title":"Total Stocks","description":"Total stocks across all screens"},"unique_stocks":{"type":"integer","title":"Unique Stocks","description":"Number of unique stocks"},"additional_fields_enabled":{"type":"boolean","title":"Additional Fields Enabled","description":"Whether additional fields are extracted"},"additional_fields":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Additional Fields","description":"Configuration of additional fields"}},"type":"object","required":["screens","total_stocks","unique_stocks","additional_fields_enabled","additional_fields"],"title":"UniverseMetadata","description":"Universe metadata model"},"UniverseResponse":{"properties":{"metadata":{"$ref":"#/components/schemas/UniverseMetadata","description":"Universe metadata and statistics"},"screens":{"additionalProperties":{"$ref":"#/components/schemas/ScreenInfo"},"type":"object","title":"Screens","description":"Data organized by screen"},"all_stocks":{"additionalProperties":{"$ref":"#/components/schemas/StockData"},"type":"object","title":"All Stocks","description":"All unique stocks indexed by ticker"}},"type":"object","required":["metadata","screens","all_stocks"],"title":"UniverseResponse","description":"Complete universe response model\nMatches the structure from create_universe()"},"UniverseSearchResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the universe search was successful"},"message":{"type":"string","title":"Message","description":"Search operation message"},"statistics":{"$ref":"#/components/schemas/IBKRSearchStats","description":"Detailed search statistics"},"output_file":{"type":"string","title":"Output File","description":"Path to output file with results"}},"type":"object","required":["success","message","statistics","output_file"],"title":"UniverseSearchResponse","description":"Response model for universe search operation"},"UniverseUpdateResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether universe was successfully updated"},"update_stats":{"anyOf":[{"$ref":"#/components/schemas/UniverseUpdateStats"},{"type":"null"}],"description":"Update statistics if successful"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message if update failed"},"file_path":{"type":"string","title":"File Path","description":"Universe file path","default":"data/universe.json"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Timestamp when update was performed"}},"type":"object","required":["success"],"title":"UniverseUpdateResponse","description":"Response model for universe.json update with exchange rates"},"UniverseUpdateStats":{"properties":{"updated_stocks_screens":{"type":"integer","minimum":0.0,"title":"Updated Stocks Screens","description":"Stocks updated in screens sections"},"updated_stocks_all":{"type":"integer","minimum":0.0,"title":"Updated Stocks All","description":"Stocks updated in all_stocks section"},"total_updated":{"type":"integer","minimum":0.0,"title":"Total Updated","description":"Total stocks updated"},"missing_rates":{"items":{"type":"string"},"type":"array","title":"Missing Rates","description":"Currencies without exchange rates"}},"type":"object","required":["updated_stocks_screens","updated_stocks_all","total_updated"],"title":"UniverseUpdateStats","description":"Statistics for universe.json update operation"},"UpdateUniverseResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the update was successful"},"message":{"type":"string","title":"Message","description":"Operation status message"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Update operation metadata"}},"type":"object","required":["success","message","metadata"],"title":"UpdateUniverseResponse","description":"Response model for universe update operation"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"app__models__schemas__PipelineExecutionStatus__1":{"type":"string","enum":["pending","running","completed","failed","cancelled","not_found"],"title":"PipelineExecutionStatus","description":"Pipeline execution status enumeration"},"app__models__schemas__PipelineExecutionStatus__2":{"properties":{"execution_id":{"type":"string","title":"Execution Id","description":"Unique execution identifier"},"status":{"$ref":"#/components/schemas/app__models__schemas__PipelineExecutionStatus__1","description":"Current execution status"},"current_step":{"anyOf":[{"type":"integer","maximum":11.0,"minimum":1.0},{"type":"null"}],"title":"Current Step","description":"Currently executing step number"},"current_step_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Step Name","description":"Currently executing step name"},"completed_steps":{"items":{"type":"integer"},"type":"array","title":"Completed Steps","description":"Successfully completed step numbers"},"failed_step":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Failed Step","description":"Step number that failed (None if no failure)"},"progress_percentage":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Progress Percentage","description":"Execution progress (0-100)"},"execution_time":{"type":"number","minimum":0.0,"title":"Execution Time","description":"Current execution time in seconds"},"estimated_remaining_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Remaining Time","description":"Estimated remaining time in seconds"},"metadata":{"$ref":"#/components/schemas/PipelineExecutionMetadata","description":"Execution metadata"}},"type":"object","required":["execution_id","status","current_step","current_step_name","completed_steps","failed_step","progress_percentage","execution_time","estimated_remaining_time","metadata"],"title":"PipelineExecutionStatus","description":"Real-time pipeline execution status"}}}}