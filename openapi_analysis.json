{"openapi":"3.1.0","info":{"title":"Uncle Stock Portfolio API","description":"API for managing portfolio optimization, screening, and execution","version":"1.0.0"},"paths":{"/api/v1/screeners/available":{"get":{"tags":["screeners"],"summary":"Get Available Screeners","description":"Retrieve list of all available screener configurations","operationId":"get_available_screeners_api_v1_screeners_available_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableScreenersResponse"}}}}}}},"/api/v1/screeners/data":{"get":{"tags":["screeners"],"summary":"Get All Screener Data","description":"Fetch current stocks from all configured screeners (equivalent to get_all_screeners())","operationId":"get_all_screener_data_api_v1_screeners_data_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllScreenersResponse"}}}}}}},"/api/v1/screeners/data/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Specific Screener Data","description":"Fetch current stocks from a specific screener (equivalent to get_current_stocks())","operationId":"get_screener_data_api_v1_screeners_data__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"},{"name":"max_results","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results to return","default":200,"title":"Max Results"},"description":"Maximum number of results to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/history":{"get":{"tags":["screeners"],"summary":"Get All Screener Histories","description":"Fetch backtest history from all configured screeners (equivalent to get_all_screener_histories())","operationId":"get_all_screener_histories_api_v1_screeners_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllScreenerHistoriesResponse"}}}}}}},"/api/v1/screeners/history/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Specific Screener History","description":"Fetch backtest history from a specific screener (equivalent to get_screener_history())","operationId":"get_screener_history_api_v1_screeners_history__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScreenerHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/legacy/data/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Screener Data (Legacy Format)","description":"Legacy endpoint returning exact format as original get_current_stocks() function","operationId":"get_screener_data_legacy_api_v1_screeners_legacy_data__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"},{"name":"max_results","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results to return","default":200,"title":"Max Results"},"description":"Maximum number of results to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegacyScreenerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/screeners/legacy/history/{screener_id}":{"get":{"tags":["screeners"],"summary":"Get Screener History (Legacy Format)","description":"Legacy endpoint returning exact format as original get_screener_history() function","operationId":"get_screener_history_legacy_api_v1_screeners_legacy_history__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener identifier","title":"Screener Id"},"description":"Screener identifier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegacyScreenerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/historical/screeners/backtest":{"get":{"tags":["historical-data"],"summary":"Get All Backtest Data","description":"Parse and return backtest data for all configured screeners","operationId":"get_all_backtest_data_api_v1_historical_screeners_backtest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BacktestDataResponse"}}}}}}},"/api/v1/historical/screeners/backtest/{screener_id}":{"get":{"tags":["historical-data"],"summary":"Get Screener Backtest Data","description":"Parse and return backtest data for a specific screener","operationId":"get_screener_backtest_data_api_v1_historical_screeners_backtest__screener_id__get","parameters":[{"name":"screener_id","in":"path","required":true,"schema":{"type":"string","description":"Screener ID from configuration","title":"Screener Id"},"description":"Screener ID from configuration"},{"name":"debug","in":"query","required":false,"schema":{"type":"boolean","description":"Enable debug output","default":false,"title":"Debug"},"description":"Enable debug output"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoricalDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/historical/performance/summary":{"get":{"tags":["historical-data"],"summary":"Get Performance Summary","description":"Get formatted performance summary for all screeners (JSON equivalent of CLI display)","operationId":"get_performance_summary_api_v1_historical_performance_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceSummaryResponse"}}}}}}},"/api/v1/historical/universe/update":{"post":{"tags":["historical-data"],"summary":"Update Universe with History","description":"Update universe.json with historical performance data in metadata section","operationId":"update_universe_with_history_api_v1_historical_universe_update_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUniverseResponse"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AllScreenerHistoriesResponse":{"properties":{"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerHistoryResponse"},"type":"object","title":"Screeners","description":"History results for each screener, keyed by screener ID"},"total_screeners":{"type":"integer","title":"Total Screeners","description":"Total number of screeners processed"},"successful_screeners":{"type":"integer","title":"Successful Screeners","description":"Number of screeners that returned history successfully"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when batch operation was completed"}},"type":"object","required":["screeners","total_screeners","successful_screeners"],"title":"AllScreenerHistoriesResponse","description":"Response model for fetching all screener histories"},"AllScreenersResponse":{"properties":{"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerDataResponse"},"type":"object","title":"Screeners","description":"Results for each screener, keyed by screener ID"},"total_screeners":{"type":"integer","title":"Total Screeners","description":"Total number of screeners processed"},"successful_screeners":{"type":"integer","title":"Successful Screeners","description":"Number of screeners that returned data successfully"},"total_symbols":{"type":"integer","title":"Total Symbols","description":"Total number of symbols across all screeners","default":0},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when batch operation was completed"}},"type":"object","required":["screeners","total_screeners","successful_screeners"],"title":"AllScreenersResponse","description":"Response model for fetching all screener data"},"AvailableScreenersResponse":{"properties":{"screeners":{"additionalProperties":{"type":"string"},"type":"object","title":"Screeners","description":"Available screeners, mapping ID to display name"},"total_count":{"type":"integer","title":"Total Count","description":"Total number of available screeners"}},"type":"object","required":["screeners","total_count"],"title":"AvailableScreenersResponse","description":"Response model for available screeners"},"BacktestDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"Data","description":"Backtest data for all screeners"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Operation metadata (counts, etc.)"}},"type":"object","required":["success","data","metadata"],"title":"BacktestDataResponse","description":"Response model for all screeners backtest data"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoricalDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"screener_id":{"type":"string","title":"Screener Id","description":"Screener identifier"},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Parsed backtest data structure"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Operation metadata (quarters parsed, etc.)"}},"type":"object","required":["success","screener_id","data","metadata"],"title":"HistoricalDataResponse","description":"Response model for individual screener backtest data"},"LegacyScreenerResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"title":"Data"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File"}},"additionalProperties":true,"type":"object","required":["success","data"],"title":"LegacyScreenerResponse","description":"Legacy response format for 100% backward compatibility\nThis matches the exact dict structure from the original implementation"},"PerformanceSummaryData":{"properties":{"title":{"type":"string","title":"Title","description":"Summary title"},"screeners":{"additionalProperties":{"$ref":"#/components/schemas/ScreenerSummary"},"type":"object","title":"Screeners","description":"Performance data by screener"}},"type":"object","required":["title","screeners"],"title":"PerformanceSummaryData","description":"Complete performance summary data"},"PerformanceSummaryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"summary":{"$ref":"#/components/schemas/PerformanceSummaryData","description":"Formatted performance summary"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Summary generation metadata"}},"type":"object","required":["success","summary","metadata"],"title":"PerformanceSummaryResponse","description":"Response model for performance summary"},"ScreenerDataResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"title":"Data","description":"Screener data (list of symbols for success, error message for failure)"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response","description":"Raw API response data"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File","description":"Path to saved CSV file"},"screener_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screener Name","description":"Human-readable screener name"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when data was fetched"},"symbol_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Symbol Count","description":"Number of symbols returned (for successful responses)"}},"type":"object","required":["success","data"],"title":"ScreenerDataResponse","description":"Response model for screener data fetching\nMatches legacy return structure for 100% compatibility"},"ScreenerHistoryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"data":{"title":"Data","description":"Historical data (dict for success, error message for failure)"},"raw_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Raw Response","description":"Raw API response data"},"csv_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Csv File","description":"Path to saved CSV file"},"screener_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screener Name","description":"Human-readable screener name"},"fetched_at":{"type":"string","format":"date-time","title":"Fetched At","description":"Timestamp when data was fetched"}},"type":"object","required":["success","data"],"title":"ScreenerHistoryResponse","description":"Response model for screener historical data\nMatches legacy return structure for 100% compatibility"},"ScreenerSummary":{"properties":{"screen_name":{"type":"string","title":"Screen Name","description":"Screener display name"},"status":{"type":"string","title":"Status","description":"Parsing status (success/error)"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if parsing failed"},"backtest_period":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Backtest Period","description":"Backtest date range"},"rebalance_timing":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rebalance Timing","description":"Rebalancing frequency"},"number_of_stocks":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Number Of Stocks","description":"Number of stocks"},"key_statistics":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Key Statistics","description":"Key performance metrics"},"quarterly_summary":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Quarterly Summary","description":"Quarterly summary"}},"type":"object","required":["screen_name","status"],"title":"ScreenerSummary","description":"Performance summary for a single screener"},"UpdateUniverseResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the update was successful"},"message":{"type":"string","title":"Message","description":"Operation status message"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Update operation metadata"}},"type":"object","required":["success","message","metadata"],"title":"UpdateUniverseResponse","description":"Response model for universe update operation"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}